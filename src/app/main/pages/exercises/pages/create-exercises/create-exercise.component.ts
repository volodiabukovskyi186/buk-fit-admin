import { Component, OnInit } from '@angular/core';
import {Timestamp} from '@angular/fire/firestore';
import { Firestore, collection, addDoc } from '@angular/fire/firestore';
import { FormBuilder, FormGroup } from '@angular/forms';
import { MatSnackBar } from '@angular/material/snack-bar';
import { Router } from '@angular/router';

@Component({
  selector: 'app-create-exercise',
  templateUrl: './create-exercise.component.html',
  styleUrls: ['./create-exercise.component.scss']
})
export class CreateExerciseComponent implements OnInit {

  formGroup: FormGroup;

  constructor(
    private firestore: Firestore,
    private snackBar: MatSnackBar,
    private fb: FormBuilder,
    private router: Router
  ) { }

  ngOnInit(): void {
    this.formGroup = this.fb.group({
      name: this.fb.control(null),
      comment: this.fb.control(null),
      videoURL: this.fb.control(null),
    });

    // this.addExercisesWithDelay(list)
  }

  async createUser(): Promise<void> {
    try {
      const payload = { ...this.formGroup.value, id: this.generateUUID() };
      const collectionRef = collection(this.firestore, 'exercise-names');

      await addDoc(collectionRef, payload);

      this.snackBar.open('✅ Вправу успішно створено', 'Закрити', { duration: 2000 });
      this.router.navigate(['/exercises']);
    } catch (error) {
      console.error("❌ Помилка створення вправи:", error);
      this.snackBar.open('❌ Помилка створення вправи', 'Закрити', { duration: 2000 });
    }
  }

  generateUUID(): string {
    return crypto.randomUUID();
  }

  // ⬇️ Новий метод для масиву з паузою 1 секунда
  async addExercisesWithDelay(exercises: Array<{ id?: string; name: string; comment: string; videoURL: string; }>): Promise<void> {
    // const collectionRef = collection(this.firestore, 'exercise-names');
    const collectionRef = collection(this.firestore, 'exercise-names-home');

    try {
      for (const exercise of exercises) {
        const payload = {
          id: exercise.id ?? this.generateUUID(),
          name: exercise.name,
          comment: exercise.comment,
          videoURL: exercise.videoURL,
          createdAt: Timestamp.now(),
        };

        await addDoc(collectionRef, payload);
        console.log('ADDED===>', payload)
        // Пауза 1 секунда перед наступною вправою
        await new Promise((resolve) => setTimeout(resolve, 1000));
      }

      this.snackBar.open(`✅ Додано ${exercises.length} вправ`, 'Закрити', { duration: 3000 });
    } catch (error) {
      console.error('❌ Помилка при масовому додаванні вправ:', error);
      this.snackBar.open('❌ Помилка при масовому додаванні вправ', 'Закрити', { duration: 3000 });
    }
  }

  moveToExegesis(id) {
    this.router.navigate([`/exercises/edit-exercise`, id]);
  }
}

// export const listNEW = [
//   {
//     "id": "c3a7d7b1-3f6a-4d7a-9c7c-9d4a1b2f1a01",
//     "name": "Присідання зі стільцем (торкатися стільця)",
//     "comment": "Стань перед стільцем, ноги на ширині плечей, носки злегка розвернуті назовні. Відводь таз назад і опускайся вниз до легкого торкання стільця, коліна рухаються по лінії носків. Спина пряма, прес напружений. Підйом — за рахунок поштовху п’ятами, без різких рухів.",
//     "videoURL": "https://t.me/c/2952373548/150"
//   },
//   {
//     "id": "b2f8a8c4-8b9a-4f2a-b9e3-1a2c3d4e5f02",
//     "name": "Піднімання прямих ніг лежачи",
//     "comment": "Лежачи на спині, руки вздовж тіла або під сідницями. Ноги прямі, поперек притиснутий до підлоги. Підіймай ноги вгору до комфортного кута за рахунок скорочення преса, без ривків. Опускай повільно, не відпускаючи напругу в м’язах живота.",
//     "videoURL": "https://t.me/c/2952373548/161"
//   },
//   {
//     "id": "e1a4f6d9-5c2b-4a7d-8b6f-2e9d3a7c1b03",
//     "name": "Розведення рук в сторони в нахилі (плечі)",
//     "comment": "Нахились вперед із прямою спиною, коліна злегка зігнуті. В кожній руці тримай пляшку з водою, руки опущені вниз, лопатки стабільні. Підіймай руки в сторони до рівня плечей, зводячи лопатки. Опускай повільно, без розгойдування корпусу.",
//     "videoURL": "https://t.me/c/2952373548/162"
//   },
//   {
//     "id": "a9d1b7c4-6e5f-4c2a-9b8d-7e1f2c3a4b04",
//     "name": "Марш на місці з махами руками",
//     "comment": "Стань рівно, корпус стабільний, прес підтягнутий. Почергово піднімай коліна, імітуючи ходу, одночасно виконуючи активні махи руками. Рухи ритмічні, дихання рівне, без стрибків і різких поштовхів.",
//     "videoURL": "https://t.me/c/2952373548/151"
//   },
//   {
//     "id": "f3c2a9d8-1b7e-4e6a-8c5d-2a4b6c9e7f05",
//     "name": "Кобра (випрямлення спини в упорі лежачи)",
//     "comment": "Лежачи на животі, долоні під плечима. На видиху плавно випрямляй руки, підіймаючи грудну клітку вгору. Таз залишається на підлозі, плечі опущені. Рух без різкого прогину в попереку, з контролем дихання.",
//     "videoURL": "https://t.me/c/2952373548/152"
//   },
//   {
//     "id": "9b6e1f2c-4d8a-4b7c-a5e9-3d2c1a8f7b06",
//     "name": "Нахили вбік (косі м’язи преса)",
//     "comment": "Стань рівно, ноги на ширині плечей. У руках можна тримати пляшку з водою або розмістити руки на поясі чи за головою. Повільно нахиляй корпус у бік, відчуваючи скорочення косих м’язів живота. Повернись у центр і виконай рух в інший бік, без ривків і скручувань.",
//     "videoURL": "https://t.me/c/2952373548/153"
//   },
//   {
//     "id": "d7a3c9f4-2b6e-4a1d-8f5c-9e2b1c4a7d07",
//     "name": "Присідання-пліє",
//     "comment": "Ноги широко, носки розвернуті назовні. Опускайся в присідання, відводячи таз вниз, коліна йдуть у напрямку носків. Спина пряма, корпус вертикальний. Підйом плавний, через п’яти, без втрати балансу.",
//     "videoURL": "https://t.me/c/2952373548/154"
//   },
//   {
//     "id": "4e1b8c9a-7d6f-4b3a-9c2e-5a1f2d8c6b08",
//     "name": "Стрибки на місці (легкі)",
//     "comment": "Стань рівно, коліна злегка м’які. Виконуй легкі пружні стрибки на місці з мінімальною амплітудою. Приземлення м’яке на всю стопу, корпус стабільний, дихання рівне.",
//     "videoURL": "https://t.me/c/2952373548/155"
//   },
//   {
//     "id": "6f5a2d8c-9b4e-4c7a-8e1f-3d2b9a1c4f09",
//     "name": "Скручування на прес",
//     "comment": "Лежачи на спині, ноги зігнуті, п’яти на підлозі. Руки біля голови або на грудях. На видиху підіймай лопатки, скручуючи корпус, без тиску на шию. Опускайся повільно, зберігаючи напругу в пресі.",
//     "videoURL": "https://t.me/c/2952373548/144"
//   },
//   {
//     "id": "8c7f2a1d-5b9e-4f6a-9d3c-1b2a4e6d8f10",
//     "name": "Підйом рук перед собою",
//     "comment": "Стань рівно, ноги на ширині таза, прес напружений. У руках можна тримати пляшки з водою. Підіймай прямі або злегка зігнуті руки перед собою до рівня плечей. Опускай повільно, не розгойдуй корпус і не закидай руки інерцією.",
//     "videoURL": "https://t.me/c/2952373548/143"
//   },
//   {
//     "id": "1d9c8f6b-4a5e-4b7d-9a2c-6f1e3a8b2d11",
//     "name": "Розведення ніг лежачи (на прес)",
//     "comment": "Лежачи на спині, ноги підняті вгору або трохи над підлогою. Повільно розводь ноги в сторони, контролюючи положення попереку. Зводь назад за рахунок роботи преса, без різких рухів.",
//     "videoURL": "https://t.me/c/2952373548/145"
//   },
//   {
//     "id": "5b3c7d1a-9e2f-4a8b-6c4d-1f9e2a8b7c12",
//     "name": "Планка на колінах",
//     "comment": "Упор на долоні або передпліччя та коліна. Тіло в прямій лінії від голови до колін, прес і сідниці напружені. Таз не провисає, лопатки стабільні, дихання рівне.",
//     "videoURL": "https://t.me/c/2952373548/146"
//   },
//   {
//     "id": "9e6a3f2b-1c7d-4b8a-5d4f-8c2a1b7e3d13",
//     "name": "Обертання корпусу стоячи",
//     "comment": "Стань рівно, ноги на ширині плечей, руки перед грудьми. Плавно обертай корпус вправо і вліво, зберігаючи стабільні стегна. Рух контрольований, без ривків, акцент на роботі м’язів корпусу.",
//     "videoURL": "https://t.me/c/2952373548/156"
//   },
//   {
//     "id": "2c1d9b7e-6a8f-4c5a-b3d4-9f2e1a7c8b14",
//     "name": "Віджимання з колінами вгору",
//     "comment": "Упор на долоні та коліна, корпус прямий. Згинай руки в ліктях, опускаючи грудну клітку вниз, лікті йдуть назад. На підйомі повністю випрямляй руки, прес тримай напруженим.",
//     "videoURL": "https://t.me/c/2952373548/147"
//   },
//   {
//     "id": "a8b7d6c2-1f9e-4a3d-8c5b-2e7f1a9d4c15",
//     "name": "Підтягування ніг до грудей у сидячому положенні",
//     "comment": "Сядь, корпус злегка відхилений назад, руки для балансу. Підтягуй зігнуті ноги до грудей за рахунок скорочення преса. Спина рівна, рух плавний, без розгойдування.",
//     "videoURL": "https://t.me/c/2952373548/148"
//   },
//   {
//     "id": "7f2e1c9b-4d6a-4a8c-b5d3-9a1e8f2c7b16",
//     "name": "Пульсуючий місток (сідниці)",
//     "comment": "Лежачи на спині, ноги зігнуті, стопи на підлозі. Підійми таз вгору, напружуючи сідниці, і виконуй короткі пульсуючі рухи. Поперек нейтральний, рух контрольований.",
//     "videoURL": "https://t.me/c/2952373548/149"
//   },
//   {
//     "id": "3d1f7c8a-9b6e-4c2a-5d4b-8f9e2a1c7b17",
//     "name": "Випади зі стрибком",
//     "comment": "Стань у випад, корпус стабільний. Зроби легкий стрибок, міняючи ноги в повітрі. Приземлення м’яке, коліна амортизують рух. Тримай баланс і контроль на кожному повторі.",
//     "videoURL": "https://t.me/c/2952373548/157"
//   },
//   {
//     "id": "6a2c9e1b-8d7f-4b5a-3c4d-1f9e7a2b8c18",
//     "name": "Розведення ніг у планці",
//     "comment": "Упор у планці на прямих руках або передпліччях. Тіло в прямій лінії, прес напружений. Почергово або одночасно розводь ноги в сторони, зберігаючи стабільний корпус без провисання тазу.",
//     "videoURL": "https://t.me/c/2952373548/158"
//   }
// ]


export const list = [
  {
    "id": "c3a7d7b1-3f6a-4d7a-9c7c-9d4a1b2f1a01",
    "name": "Присідання зі стільцем (торкатися стільця)",
    "comment": "Стань перед стільцем, ноги на ширині плечей, носки злегка розвернуті назовні. Відводь таз назад і опускайся вниз до легкого торкання стільця, коліна рухаються по лінії носків. Спина пряма, прес напружений. Підйом — за рахунок поштовху п’ятами, без різких рухів.",
    "videoURL": "https://t.me/c/2952373548/150"
  },
  {
    "id": "b2f8a8c4-8b9a-4f2a-b9e3-1a2c3d4e5f02",
    "name": "Піднімання прямих ніг лежачи",
    "comment": "Лежачи на спині, руки вздовж тіла або під сідницями. Ноги прямі, поперек притиснутий до підлоги. Підіймай ноги вгору до комфортного кута за рахунок скорочення преса, без ривків. Опускай повільно, не відпускаючи напругу в м’язах живота.",
    "videoURL": "https://t.me/c/2952373548/161"
  },
  {
    "id": "e1a4f6d9-5c2b-4a7d-8b6f-2e9d3a7c1b03",
    "name": "Розведення рук в сторони в нахилі (плечі)",
    "comment": "Нахились вперед із прямою спиною, коліна злегка зігнуті. В кожній руці тримай пляшку з водою, руки опущені вниз, лопатки стабільні. Підіймай руки в сторони до рівня плечей, зводячи лопатки. Опускай повільно, без розгойдування корпусу.",
    "videoURL": "https://t.me/c/2952373548/162"
  },
  {
    "id": "a9d1b7c4-6e5f-4c2a-9b8d-7e1f2c3a4b04",
    "name": "Марш на місці з махами руками",
    "comment": "Стань рівно, корпус стабільний, прес підтягнутий. Почергово піднімай коліна, імітуючи ходу, одночасно виконуючи активні махи руками. Рухи ритмічні, дихання рівне, без стрибків і різких поштовхів.",
    "videoURL": "https://t.me/c/2952373548/151"
  },
  {
    "id": "f3c2a9d8-1b7e-4e6a-8c5d-2a4b6c9e7f05",
    "name": "Кобра (випрямлення спини в упорі лежачи)",
    "comment": "Лежачи на животі, долоні під плечима. На видиху плавно випрямляй руки, підіймаючи грудну клітку вгору. Таз залишається на підлозі, плечі опущені. Рух без різкого прогину в попереку, з контролем дихання.",
    "videoURL": "https://t.me/c/2952373548/152"
  },
  {
    "id": "9b6e1f2c-4d8a-4b7c-a5e9-3d2c1a8f7b06",
    "name": "Нахили вбік (косі м’язи преса)",
    "comment": "Стань рівно, ноги на ширині плечей. У руках можна тримати пляшку з водою або розмістити руки на поясі чи за головою. Повільно нахиляй корпус у бік, відчуваючи скорочення косих м’язів живота. Повернись у центр і виконай рух в інший бік, без ривків і скручувань.",
    "videoURL": "https://t.me/c/2952373548/153"
  },
  {
    "id": "d7a3c9f4-2b6e-4a1d-8f5c-9e2b1c4a7d07",
    "name": "Присідання-пліє",
    "comment": "Ноги широко, носки розвернуті назовні. Опускайся в присідання, відводячи таз вниз, коліна йдуть у напрямку носків. Спина пряма, корпус вертикальний. Підйом плавний, через п’яти, без втрати балансу.",
    "videoURL": "https://t.me/c/2952373548/154"
  },
  {
    "id": "4e1b8c9a-7d6f-4b3a-9c2e-5a1f2d8c6b08",
    "name": "Стрибки на місці (легкі)",
    "comment": "Стань рівно, коліна злегка м’які. Виконуй легкі пружні стрибки на місці з мінімальною амплітудою. Приземлення м’яке на всю стопу, корпус стабільний, дихання рівне.",
    "videoURL": "https://t.me/c/2952373548/155"
  },
  {
    "id": "6f5a2d8c-9b4e-4c7a-8e1f-3d2b9a1c4f09",
    "name": "Скручування на прес",
    "comment": "Лежачи на спині, ноги зігнуті, п’яти на підлозі. Руки біля голови або на грудях. На видиху підіймай лопатки, скручуючи корпус, без тиску на шию. Опускайся повільно, зберігаючи напругу в пресі.",
    "videoURL": "https://t.me/c/2952373548/144"
  },
  {
    "id": "8c7f2a1d-5b9e-4f6a-9d3c-1b2a4e6d8f10",
    "name": "Підйом рук перед собою",
    "comment": "Стань рівно, ноги на ширині таза, прес напружений. У руках можна тримати пляшки з водою. Підіймай прямі або злегка зігнуті руки перед собою до рівня плечей. Опускай повільно, не розгойдуй корпус і не закидай руки інерцією.",
    "videoURL": "https://t.me/c/2952373548/143"
  },
  {
    "id": "1d9c8f6b-4a5e-4b7d-9a2c-6f1e3a8b2d11",
    "name": "Розведення ніг лежачи (на прес)",
    "comment": "Лежачи на спині, ноги підняті вгору або трохи над підлогою. Повільно розводь ноги в сторони, контролюючи положення попереку. Зводь назад за рахунок роботи преса, без різких рухів.",
    "videoURL": "https://t.me/c/2952373548/145"
  },
  {
    "id": "5b3c7d1a-9e2f-4a8b-6c4d-1f9e2a8b7c12",
    "name": "Планка на колінах",
    "comment": "Упор на долоні або передпліччя та коліна. Тіло в прямій лінії від голови до колін, прес і сідниці напружені. Таз не провисає, лопатки стабільні, дихання рівне.",
    "videoURL": "https://t.me/c/2952373548/146"
  },
  {
    "id": "9e6a3f2b-1c7d-4b8a-5d4f-8c2a1b7e3d13",
    "name": "Обертання корпусу стоячи",
    "comment": "Стань рівно, ноги на ширині плечей, руки перед грудьми. Плавно обертай корпус вправо і вліво, зберігаючи стабільні стегна. Рух контрольований, без ривків, акцент на роботі м’язів корпусу.",
    "videoURL": "https://t.me/c/2952373548/156"
  },
  {
    "id": "2c1d9b7e-6a8f-4c5a-b3d4-9f2e1a7c8b14",
    "name": "Віджимання з колінами вгору",
    "comment": "Упор на долоні та коліна, корпус прямий. Згинай руки в ліктях, опускаючи грудну клітку вниз, лікті йдуть назад. На підйомі повністю випрямляй руки, прес тримай напруженим.",
    "videoURL": "https://t.me/c/2952373548/147"
  },
  {
    "id": "a8b7d6c2-1f9e-4a3d-8c5b-2e7f1a9d4c15",
    "name": "Підтягування ніг до грудей у сидячому положенні",
    "comment": "Сядь, корпус злегка відхилений назад, руки для балансу. Підтягуй зігнуті ноги до грудей за рахунок скорочення преса. Спина рівна, рух плавний, без розгойдування.",
    "videoURL": "https://t.me/c/2952373548/148"
  },
  {
    "id": "7f2e1c9b-4d6a-4a8c-b5d3-9a1e8f2c7b16",
    "name": "Пульсуючий місток (сідниці)",
    "comment": "Лежачи на спині, ноги зігнуті, стопи на підлозі. Підійми таз вгору, напружуючи сідниці, і виконуй короткі пульсуючі рухи. Поперек нейтральний, рух контрольований.",
    "videoURL": "https://t.me/c/2952373548/149"
  },
  {
    "id": "3d1f7c8a-9b6e-4c2a-5d4b-8f9e2a1c7b17",
    "name": "Випади зі стрибком",
    "comment": "Стань у випад, корпус стабільний. Зроби легкий стрибок, міняючи ноги в повітрі. Приземлення м’яке, коліна амортизують рух. Тримай баланс і контроль на кожному повторі.",
    "videoURL": "https://t.me/c/2952373548/157"
  },
  {
    "id": "6a2c9e1b-8d7f-4b5a-3c4d-1f9e7a2b8c18",
    "name": "Розведення ніг у планці",
    "comment": "Упор у планці на прямих руках або передпліччях. Тіло в прямій лінії, прес напружений. Почергово або одночасно розводь ноги в сторони, зберігаючи стабільний корпус без провисання тазу.",
    "videoURL": "https://t.me/c/2952373548/158"
  }
]


