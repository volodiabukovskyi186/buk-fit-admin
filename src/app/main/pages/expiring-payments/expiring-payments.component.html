<div class="h-100 w-100 p-12 container">
  <div class="flex  justify-content-between">
    <h2 class="fc-primary">Користувачів: {{ totalUsersCount }}</h2>
  </div>

  <div class="w-100 " style="overflow: scroll; max-height: 100%; height: 100%;">
    <hs-table-grid style=" height: 100% !important;" *ngIf="users.length" [dataType]="tableGridDataTypeEnum.API"
                   [allowMultiplySorting]="false" [data]="users" (clickOnRow)="moveToMessage($event.id)">

      <div hsTableColumn caption="ID" width="70px" fieldName="id" [allowResize]="true"></div>

      <div hsTableColumn fieldName="img" caption="Імя" width="120px" [cellTemplate]="idNumberTmpl" [allowResize]="true">
        <ng-template #idNumberTmpl let-data="cellData">
          <div class="m-2">
            {{ data?.name }}
          </div>
        </ng-template>
      </div>


      <div hsTableColumn fieldName="img" caption="Прізвище" width="120px" [cellTemplate]="idNumberChatTmpl"
           [allowResize]="true">
        <ng-template #idNumberChatTmpl let-data="cellData">
          <div class="m-2">
            {{ data?.secondName }}
          </div>
        </ng-template>
      </div>


      <div hsTableColumn  caption="Telegram" width="150px" [cellTemplate]="tgUserTmpl"
           [allowResize]="true">
        <ng-template #tgUserTmpl let-data="cellData">
          <div class="m-2 fc-primary hs-link" *ngIf="data?.tgUser?.username" (click)="moveToTg(data?.tgUser)">
            {{ data?.tgUser?.username }}
          </div>
        </ng-template>
      </div>

      <div hsTableColumn fieldName="name" caption="Період активності" width="200px" [cellTemplate]="fromDateTmpl"
           [allowResize]="true">
        <ng-template #fromDateTmpl let-data="cellData">
          {{ data?.fromDate | dateFirebase }} - {{ data?.toDate | dateFirebase }}
        </ng-template>
      </div>



      <div hsTableColumn fieldName="img" caption="Завершення тарифу" width="150px" *ngIf="user.role !== userRoleEnum.TRAINER" [cellTemplate]="endDateTmpl"
           [allowResize]="true">
        <ng-template #endDateTmpl let-data="cellData">
          <div class="m-2" *ngIf="data?.endDate"  [ngClass]="{
          'fc-warning': data?.paymentStatus === paymentDateEnum.WARNING,
          'fc-error': data?.paymentStatus === paymentDateEnum.OVERDUE,
          'fc-success': data?.paymentStatus === paymentDateEnum.ON_TIME,
          }">
            {{ data?.endDate?.seconds * 1000 | date: 'dd.MM.yyyy' }}
          </div>

          <div *ngIf="!data?.endDate">-</div>
        </ng-template>
      </div>

    </hs-table-grid>


  </div>
  <mat-paginator
    [length]="totalUsersCount"
    [pageSize]="pageSize"
    [pageSizeOptions]="[5, 10, 20]"
    (page)="onPageChange($event)"
  >
  </mat-paginator>

</div>




